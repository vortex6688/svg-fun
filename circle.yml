---
machine:
  node:
    version: 6.10.0

test:
  pre:
    # needed so karma has a place to write the tests.
    - mkdir -p dist/tests/junit
    # needed so we hace a destination to copy tests to.
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
  override:
    - npm run ci:aot
  post:
    - cp -rp dist/tests/junit/* $CIRCLE_TEST_REPORTS/junit/

deployment:
  development:
    branch: master
    commands:
      - tar -cvz dist > $CIRCLE_ARTIFACTS/dist.tgz
